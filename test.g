#############################################################################
##
##                             orbit package
##  test.g
##                                                          Sergio Siccha
##
##  Copyright...
##
##  tests for orbit under HPC-GAP
##
#############################################################################
## Benchmarking and testing of hashTableOrbit
Read("../utils.g");

## test hTO
testHashTableOrbit := function( x, G, NUMBER_THREADS, NUMBER_GRAB_NEW, opt... )
  local res1, res2, task;
  if opt = [] then
    opt := rec();
  else
    opt := opt[1];
  fi;
  opt.verbose := IsBound( opt.verbose );

  task := RunTask(
    hashTableOrbitMaster,
    G,
    x,
    rec(
      NUMBER_THREADS := NUMBER_THREADS,
      NUMBER_GRAB_NEW := NUMBER_GRAB_NEW
    )
  );
  res1 := TaskResult( task );
  if opt.verbose then
    Print( Size( res1 ), "\n" );
  fi;
  return res1;
end;

#testHashTableOrbit( (1,2,3), 100, 8, 200 );
#testHashTableOrbit( (1,2,3), 130, 8,  20 );  # faster than 200?

_args := [ (1,2,3), SymmetricGroup(120), 8, 20 ];

H := Group([(1,41,59,119,29,108,96,101,70,4,95,54,9,10,94,36,74,40,32,33,24,77,26,61,118,115,34,83,65,91,38,89,57,42,69,23,117)(2,73,28,6,111,18,62,79,105,116,98,20,16,48,88,113,92,104,85,103,37,52,14,50,100,49,46,27,44,90,11,60,87)(3,30,110,86,114,112,55,106,93,107,76)(5,35,8,66,19,13,21,97,82,43,84,72,51,7,68,17,22,75,99,15,81)(12,78,25,53)(31,120,80,67,102,63,45,64,109,58,71,39),
(1,38,39,12,22,44,102,46,113,114,11,101,91,62,2,26,67,23,31,13,82,21,73,64,33,87,55,16,78,48,10,108,42,8,96,74,47,27,17,111,104,77,100,88,20,6,53,85,98,76,4,25,57,112,59,15,7,70,29,99,83,19,120,105,72,94,37,71,49,79,93,63,80,65,75,110,109,45,117,89,106,119,81,36,43,116,68,115,52,40,69,14,118,18,95)(3,60,107,86,50,92,54,5,34,84,66,35,90,61)(9,103)(24,56,58,97,30,28,51,41),
(1,91,51,97,115,117,63,35,107,67,85,71,65,84,55,14,16,95,77,17,102,42,100,26,111,74,27,8,43,56,48,9,87,11,57,112,47,5,82,12,62,2,15,3,46,29,54,101,37,105,36,83,7,4,70,41,76,58,64,116,49,39,69,53,80,94,86,78,19,61,30,90,40,24,31,59,22,88,25,92,33,28,68,75,34,6,108,66,44,114,96,99,38,21,113,109,81,93,23,18,73,104,45,72)(10,60,98,20,119,52,103,106,89,13,118,120,79,50,110)]);

_args2 := [ (1,2,3), H, 4, 200 ];
